@section scripts
{
    @Scripts.Render("~/bundles/User")
}

<div ng-controller="UserController">

    <div class="row header-detail">
        <div class="col-md-6 blue-dark">
            <h4 class="bold"> Thông tin tài khoản </h4>
        </div>
    </div>


    <div class="container-fluid">
        <div class="row">
            <div class="col-md-6 form-group">
                <div class="row margin-top-10">
                    <div class="col-md-4 ">
                        <label class="control-label">Tên nhân viên</label>
                    </div>
                    <div class="col-md-8">
                        <span ng-bind="UserForm.UserName"></span>
                    </div>
                </div>
                <div class="row margin-top-10">
                    <div class="col-md-4">
                        <label class="control-label">Mã nhân viên</label>
                    </div>
                    <div class="col-md-8">
                        <span ng-bind="UserForm.LoginId"></span>
                    </div>
                </div>
                <div class="row margin-top-10">
                    <div class="col-md-4">
                        <label class="control-label">Email</label>
                    </div>
                    <div class="col-md-8">
                        <span ng-bind="UserForm.Email"></span>
                    </div>
                </div>
                <div class="row margin-top-10">
                    <div class="col-md-4">
                        <label class="control-label">Số điện thoại</label>
                    </div>
                    <div class="col-md-8">
                        <span ng-bind="UserForm.Phone"></span>
                    </div>
                </div>
                <div class="row margin-top-10">
                    <div class="col-md-4">
                        <label class="control-label">Mật khẩu</label>
                    </div>
                    <div class="col-md-8">
                        <input class="form-control margin-top-10" ng-model="UserForm.OldPassword" 
                               type="password" placeholder="Mật khẩu cũ" ng-if="UserForm.IsEditingPassword"
                               check-empty = "" check-empty-message = "Vui lòng nhập mật khẩu hiện tại."/>
                        <input class="form-control margin-top-10" ng-model="UserForm.NewPassword" 
                               type="password" placeholder="Mật khẩu mới" ng-if="UserForm.IsEditingPassword"
                               check-empty = "" check-empty-message = "Vui lòng nhập mật khẩu mới."/>
                        <input class="form-control margin-top-10" ng-model="UserForm.NewPassword2" 
                               type="password" placeholder="Nhập lại mật khẩu" ng-if="UserForm.IsEditingPassword"
                               check-empty = "" check-empty-message = "Vui lòng nhập lại mật khẩu mới."/>
                        <button class="btn btn-primary margin-top-10" ng-if="!UserForm.IsEditingPassword"
                                ng-click="UserForm.IsEditingPassword = true;">
                            <i class="fa fa-retweet white"></i>
                            <span>Đổi mật khẩu</span>
                        </button>
                        <button class="btn btn-default margin-top-10" ng-if="UserForm.IsEditingPassword"
                                ng-click="UndoChangePassword()">
                            <i class="fa fa-undo"></i>
                            <span>Hủy</span>
                        </button>
                        <button class="btn btn-primary margin-top-10" ng-if="UserForm.IsEditingPassword"
                                ng-click="ChangePassword()">
                            <i class="fa fa-save white"></i>
                            <span>Lưu</span>
                        </button>
                    </div>
                </div>
                <div class="row margin-top-10">
                    <div class="col-md-4">
                        <label class="control-label">Nhóm người dùng</label>
                    </div>
                    <div class="col-md-12">
                        <table grid-data="UserRoles"
                               grid-data-type="table" @*table/storedprocedure*@
                               grid-data-action="getall" @*get/getall*@
                               grid-data-object="T_Trans_User_Store" @*table name or stored procedure name*@
                               grid-filter-condition="[UserId] = {{CurrentUser}} and [IsActive] = 1" @*must have [fieldname] for each colum field*@
                               grid-sort-condition="[StoreId.StoreCode] ASC" @*must have [fieldname] for each colum field*@
                               grid-sum-collection="" @*must have [fieldname] for each colum field*@
                               class="table table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th grid-defined-colum="StoreId.StoreCode"><span>Cửa hàng</span></th>
                                    <th grid-defined-colum="RoleId.RoleName"><span>Nhóm người dùng</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                @*Dataset must have grid id*@
                                <tr ng-repeat="item in DataSet.UserRoles.Data">
                                    <td ng-bind="item.StoreCode"></td>
                                    <td ng-bind="item.RoleName"></td>
                                </tr>
                                <tr ng-if="!DataSet.UserRoles.HasRecord()">
                                    @*Edit colspan*@
                                    <td colspan="2" align="center"> Không có dữ liệu! </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>