<div id="SettingController" ng-controller="SettingController">
    <div class="container-fluid">

        <div class="row">
            <div class="tabbable" style="padding-top: 10px">
                <ul class="nav nav-tabs padding-left-18">
                    <li ng-click="SetCurrentTab('Users')" ng-class="{active : (CurrentTab =='Users') }">
                        <a data-toggle="tab">
                            <i class="blue fa-user fa"></i>
                            <span>Nhân viên</span>
                        </a>
                    </li>
                    <li ng-click="SetCurrentTab('Stores')" ng-class="{active : (CurrentTab =='Stores') }">
                        <a data-toggle="tab">
                            <i class="blue fa-cog fa"></i>
                            <span>Thông tin cửa hàng</span>
                        </a>
                    </li>
                    <li ng-click="SetCurrentTab('Setting')" ng-class="{active : (CurrentTab =='Setting') }">
                        <a data-toggle="tab">
                            <i class="blue fa-cogs fa"></i>
                            <span>Thiết lập bán hàng</span>
                        </a>
                    </li>
                    <li ng-click="SetCurrentTab('Prints')" ng-class="{active : (CurrentTab =='Prints') }">
                        <a data-toggle="tab">
                            <i class="blue fa-print fa"></i>
                            <span>Quản lý mẫu in</span>
                        </a>
                    </li>
                    <li ng-click="SetCurrentTab('Promotion')" ng-class="{active : (CurrentTab =='Promotion') }">
                        <a data-toggle="tab">
                            <i class="blue fa-gift fa"></i>
                            <span>Khuyến mãi</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="tab-content no-border active">
                <div class="tab-pane active" ng-class="{active : (CurrentTab =='Users') }">
                    <div class="col-md-12" ng-if="(CurrentTab =='Users')">
                        <div class="row" style="padding-bottom: 10px; padding-top: 5px">
                            <div class="col-md-5 margin-top-5">
                                <span grid-filter-for="Users" place-holder-message="Nhập mã, tên nhân viên"></span>
                            </div>
                            <div class="col-md-4 pull-right text-right margin-top-5">
                                <button class="btn btn-success btn-primary" data-toggle="modal"
                                        data-target="#userModal" ng-click="ResetUserModal()"
                                        ng-if="UserFormConfig._CanCreate">
                                    <i class="fa fa-plus white"></i>
                                    <span>Tạo nhân viên</span>
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="table-responsive">
                                    <table grid-data="Users"
                                           grid-data-type="table" @*table/storedprocedure*@
                                           grid-data-action="get" @*get/getall*@
                                           grid-data-object="T_Master_User" @*table name or stored procedure name*@
                                           grid-filter-condition="[IsDeveloper] is null or [IsDeveloper] = 0" @*must have [fieldname] for each colum field*@
                                           grid-sort-condition="[UserName] ASC" @*must have [fieldname] for each colum field*@
                                           grid-sum-collection="" @*must have [fieldname] for each colum field*@
                                           class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th grid-defined-colum="LoginId"><span>Mã nhân viên</span></th>
                                                <th grid-defined-colum="UserName"><span>Tên nhân viên</span></th>
                                                <th grid-defined-colum="Email"><span>Email</span></th>
                                                <th grid-defined-colum="Phone"><span>Điện thoại</span></th>
                                                <th grid-defined-colum="IsActive"><span>Trạng thái</span></th>
                                                <th><span>Nhóm người dùng</span></th>
                                                <th></th>
                                                <th grid-defined-colum="UserId" class="none-display"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @*Dataset must have grid id*@
                                            <tr ng-repeat="item in DataSet.Users.Data">
                                                <td ng-bind="item.LoginId"></td>
                                                <td>
                                                    <span ng-bind="item.UserName" ng-if="!item.IsEditing"> </span>
                                                    <input class="form-control min-width-150" ng-model="item.UserName" ng-if="item.IsEditing"
                                                           check-empty="" check-empty-message="Vui lòng nhập tên nhân viên."
                                                           check-length="100" check-length-message="Chiều dài tối đa tên nhân viên là {0}."
                                                           check-under="check-user{{item.UserId}}" />
                                                </td>
                                                <td>
                                                    <span ng-bind="item.Email" ng-if="!item.IsEditing"></span>
                                                    <input class="form-control min-width-150" ng-model="item.Email" ng-if="item.IsEditing"
                                                           check-custom="CheckEmailValid" check-custom-message="Vui lòng nhập email hợp lệ."
                                                           check-under="check-user{{item.UserId}}" />
                                                </td>
                                                <td>
                                                    <span ng-bind="item.Phone" ng-if="!item.IsEditing"></span>
                                                    <input class="form-control min-width-150" ng-model="item.Phone" ng-if="item.IsEditing"
                                                           check-length="50" check-length-message="Chiều dài tối ta là {0}."
                                                           check-under="check-user{{item.UserId}}" />
                                                </td>
                                                <td>
                                                    <input type="checkbox" ng-true-value="1" ng-false-value="0"
                                                           ng-model="item.IsActive" ng-if="item.IsEditing" />
                                                    <span ng-if="item.IsActive == 1" class="label label-success">
                                                        <i class="fa fa-unlock"> </i>
                                                        Đang hoạt động
                                                    </span>
                                                    <span ng-if="item.IsActive == 0" class="label label-warning">
                                                        <i class="fa fa-lock"> </i>
                                                        Ngừng hoạt động
                                                    </span>
                                                </td>
                                                <td class="text-center">
                                                    <a ng-if="item._CanUpdate" class="blue margin-left-10" title="Xem phân quyền cho nhân viên"
                                                       data-toggle="modal" data-target="#rolesModal" ng-click="ViewUserRole(item)">
                                                        <i class="fa-user-md fa"></i>
                                                    </a>
                                                </td>
                                                <td>
                                                    <a ng-if="item._CanUpdate" class="blue margin-left-10" title="Lấy lại mật khẩu"
                                                       ng-click="RestorePassword(item)">
                                                        <i class="fa-key fa"></i>
                                                    </a>
                                                    <a ng-if="!item.IsEditing && item._CanUpdate" class="blue margin-left-10"
                                                       title="Chỉnh sửa" ng-click="item.IsEditing = true;">
                                                        <i class="fa-edit fa"></i>
                                                    </a>
                                                    <a ng-if="item.IsEditing && item._CanUpdate" class="blue margin-left-10"
                                                       title="Lưu" ng-click="SaveUser(item);">
                                                        <i class="fa-save fa"></i>
                                                    </a>
                                                    <a ng-if="item.IsEditing" class="blue margin-left-10"
                                                       title="Hủy" ng-click="item.IsEditing = false; ReloadGrid('Users')">
                                                        <i class="fa-undo fa"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr ng-if="!DataSet.Users.HasRecord()">
                                                @*Edit colspan*@
                                                <td colspan="7" align="center"> Không có dữ liệu! </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="row">
                                    <div class="col-md-9">
                                        <span grid-paging-for="Users"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <span grid-page-size-for="Users"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h3>Chức năng cho nhóm người dùng</h3>
                                <div class="table-responsive">
                                    <table id="sample-table-2" class="table table-bordered table-hover">
                                        <thead>
                                            <tr>
                                                <th class="text-center border white-bg">Chức năng</th>
                                                <th class="text-center border">Chủ <span class="hidden-640">cửa hàng</span></th>
                                                <th class="text-center border"><span class="show-640">QL</span><span class="hidden-640">Quản lý</span></th>
                                                <th class="text-center border"><span class="show-640">NV</span><span class="hidden-640">Nhân viên bán hàng</span></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="text-center border hl">Bán hàng - POS</td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center border hl">Báo cáo cuối ngày</td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center border hl">Hàng hóa</td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-remove fa red"></i></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center border hl">Đơn hàng</td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-remove fa red"></i></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center border hl">Nhập hàng</td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-remove fa red"></i></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center border hl">Báo cáo lợi nhuận</td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-remove fa red"></i></td>
                                                <td class="text-center border"><i class="fa-remove fa red"></i></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center border hl">Báo cáo nhập xuất tồn</td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-remove fa red"></i></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center border hl">Báo cáo tồn kho</td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-remove fa red"></i></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center border hl">Thiết lập <span class="hidden-640" style="font-weight: normal">(Thông tin cửa hàng, nhân viên, thiết lập bán hàng, quản lý mẫu in)</span> </td>
                                                <td class="text-center border"><i class="fa-check fa green"></i></td>
                                                <td class="text-center border"><i class="fa-remove fa red"></i></td>
                                                <td class="text-center border"><i class="fa-remove fa red"></i></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-xs-12">
                                    <h3 class="main-color">Lưu ý</h3>
                                    <p><i><strong>[Chủ cửa hàng]</strong> mới được xem giá vốn của hàng hóa và báo cáo lợi nhuận</i></p>
                                    <p><i><strong>[Quản lý]</strong> không xóa được dữ liệu. Để xóa được dữ liệu, cần liên hệ <strong>[Chủ cửa hàng]</strong> để xóa</i></p>
                                    <p><i><strong>[Nhân viên bán hàng]</strong> chỉ được bán hàng, nhập trả hàng và xem báo cáo cuối ngày từ POS</i></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" ng-class="{active : (CurrentTab =='Stores') }">
                    <div class="col-md-12" ng-if="(CurrentTab =='Stores')">
                        <div class="padding-left-18" ng-init="LoadStoreForm()">
                            <div class="row margin-top-10">
                                <div class="col-md-3">
                                    <label class="control-label">Tên cửa hàng</label>
                                </div>
                                <div class="col-md-4">
                                    <input class="form-control" ng-model="StoreForm.StoreName"
                                           check-empty="" check-empty-message="Vui lòng nhập tên cửa hàng."
                                           check-length="500" check-length-message="Chiều dài tối ta là {0}."
                                           ng-disabled="!StoreForm.IsEditing" />
                                </div>
                            </div>
                            <div class="row margin-top-10">
                                <div class="col-md-3">
                                    <label class="control-label">Mã cửa hàng</label>
                                </div>
                                <div class="col-md-4">
                                    <input class="form-control" ng-model="StoreForm.StoreCode"
                                           check-empty="" check-empty-message="Vui lòng nhập mã cửa hàng."
                                           check-length="100" check-length-message="Chiều dài tối ta là {0}."
                                           ng-disabled="!StoreForm.IsEditing" />
                                </div>
                            </div>
                            <div class="row margin-top-10">
                                <div class="col-md-3">
                                    <label class="control-label">Tên người đại diện</label>
                                </div>
                                <div class="col-md-4">
                                    <input class="form-control" ng-model="StoreForm.PresenterName"
                                           check-length="100" check-length-message="Chiều dài tối ta là {0}."
                                           ng-disabled="!StoreForm.IsEditing" />
                                </div>
                            </div>
                            <div class="row margin-top-10">
                                <div class="col-md-3">
                                    <label class="control-label">Số điện thoại</label>
                                </div>
                                <div class="col-md-4">
                                    <input class="form-control" ng-model="StoreForm.PhoneNumber"
                                           check-length="50" check-length-message="Chiều dài tối ta là {0}."
                                           ng-disabled="!StoreForm.IsEditing" />
                                </div>
                            </div>
                            <div class="row margin-top-10">
                                <div class="col-md-3">
                                    <label class="control-label">Địa chỉ cửa hàng</label>
                                </div>
                                <div class="col-md-4">
                                    <input class="form-control" ng-model="StoreForm.Address"
                                           check-length="500" check-length-message="Chiều dài tối ta là {0}."
                                           ng-disabled="!StoreForm.IsEditing" />
                                </div>
                            </div>                            
                            <div class="row margin-top-10">
                                <div class="col-md-3">
                                    <label class="control-label">Mã số thuế</label>
                                </div>
                                <div class="col-md-4">
                                    <input class="form-control" ng-model="StoreForm.TaxCode"
                                           check-length="100" check-length-message="Chiều dài tối ta là {0}."
                                           ng-disabled="!StoreForm.IsEditing" />
                                </div>
                            </div>
                            <div class="row margin-top-10">
                                <div class="col-md-7 text-center">
                                    <button class="btn btn-primary margin-top-10" ng-if="!StoreForm.IsEditing"
                                            ng-click="StoreForm.IsEditing = true;">
                                        <i class="fa fa-edit"></i>
                                        <span>Chỉnh sửa</span>
                                    </button>
                                    <button class="btn btn-primary margin-top-10" ng-if="!StoreForm.IsEditing && StoreForm.TriggerCreateSampleData == 0"
                                            ng-click="CreateSampleDataStore()">
                                        <i class="fa fa-creative-commons"></i>
                                        <span>Tạo dữ liệu mẫu</span>
                                    </button>
                                    <button class="btn btn-primary margin-top-10" ng-if="!StoreForm.IsEditing && StoreForm.TriggerCreateSampleData == 1"
                                            ng-click="DeleteDataStore()">
                                        <i class="fa fa-eraser"></i>
                                        <span>Xóa dữ liệu cửa hàng</span>
                                    </button>
                                    <button class="btn btn-primary margin-top-10" ng-if="!StoreForm.IsEditing && CanAddStore"
                                            ng-click="ResetStoreForm(); StoreForm.IsEditing = true;">
                                        <i class="fa fa-plus"></i>
                                        <span>Thêm Cửa hàng</span>
                                    </button>
                                    <button class="btn btn-default margin-top-10" ng-if="StoreForm.IsEditing"
                                            ng-click="UndoStoreForm()">
                                        <i class="fa fa-undo"></i>
                                        <span>Trở về</span>
                                    </button>
                                    <button class="btn btn-primary margin-top-10" ng-if="StoreForm.IsEditing"
                                            ng-click="SaveStoreForm()">
                                        <i class="fa fa-save"></i>
                                        <span>Lưu</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="row margin-top-10">
                            <div class="col-md-12">
                                <div class="table-responsive">
                                    <table grid-data="Stores"
                                           grid-data-type="table" @*table/storedprocedure*@
                                           grid-data-action="get" @*get/getall*@
                                           grid-data-object="T_Master_Stores" @*table name or stored procedure name*@
                                           grid-filter-condition="[IsActive] = 1" @*must have [fieldname] for each colum field*@
                                           grid-sort-condition="[StoreCode] ASC" @*must have [fieldname] for each colum field*@
                                           grid-sum-collection="" @*must have [fieldname] for each colum field*@
                                           class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th grid-defined-colum="StoreCode"><span>Mã cửa hàng</span></th>
                                                <th grid-defined-colum="StoreName"><span>Tên cửa hàng</span></th>
                                                <th grid-defined-colum="PhoneNumber"><span>Số điện thoại</span></th>
                                                <th grid-defined-colum="Address"><span>Địa chỉ</span></th>
                                                <th style="width: 10%"></th>
                                                <th grid-defined-colum="StoreId" class="none-display"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @*Dataset must have grid id*@
                                            <tr ng-repeat="item in DataSet.Stores.Data">
                                                <td>
                                                    <span ng-bind="item.StoreCode" ng-if="!item.IsEditing"> </span>
                                                    <input class="form-control min-width-150" ng-model="item.StoreCode" ng-if="item.IsEditing"
                                                           check-empty="" check-empty-message="Vui lòng nhập mã cửa hàng."
                                                           check-length="100" check-length-message="Chiều dài tối ta là {0}."
                                                           check-under="check-store{{item.StoreId}}" />
                                                </td>
                                                <td>
                                                    <span ng-bind="item.StoreName" ng-if="!item.IsEditing"></span>
                                                    <input class="form-control min-width-150" ng-model="item.StoreName" ng-if="item.IsEditing"
                                                           check-empty="" check-empty-message="Vui lòng nhập tên cửa hàng."
                                                           check-length="500" check-length-message="Chiều dài tối ta là {0}."
                                                           check-under="check-store{{item.StoreId}}" />
                                                </td>
                                                <td>
                                                    <span ng-bind="item.PhoneNumber" ng-if="!item.IsEditing"></span>
                                                    <input class="form-control min-width-150" ng-model="item.PhoneNumber" ng-if="item.IsEditing"
                                                           check-length="50" check-length-message="Chiều dài tối ta là {0}."
                                                           check-under="check-store{{item.StoreId}}" />
                                                </td>
                                                <td>
                                                    <span ng-bind="item.Address" ng-if="!item.IsEditing"></span>
                                                    <input class="form-control min-width-150" ng-model="item.Address" ng-if="item.IsEditing"
                                                           check-length="500" check-length-message="Chiều dài tối ta là {0}."
                                                           check-under="check-store{{item.StoreId}}" />
                                                </td>
                                                <td>
                                                    <a ng-if="!item.IsEditing && item._CanUpdate" class="blue margin-left-10"
                                                       title="Chỉnh sửa" ng-click="item.IsEditing = true;">
                                                        <i class="fa-edit fa"></i>
                                                    </a>
                                                    <a ng-if="item.IsEditing && item._CanUpdate" class="blue margin-left-10"
                                                       title="Lưu" ng-click="SaveStoreItem(item);">
                                                        <i class="fa-save fa"></i>
                                                    </a>
                                                    <a ng-if="item.IsEditing" class="blue margin-left-10"
                                                       title="Hủy" ng-click="item.IsEditing = false; ReloadGrid('Stores')">
                                                        <i class="fa-undo fa"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr ng-if="!DataSet.Stores.HasRecord()">
                                                @*Edit colspan*@
                                                <td colspan="5" align="center"> Không có dữ liệu! </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="row">
                                    <div class="col-md-9">
                                        <span grid-paging-for="Stores"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <span grid-page-size-for="Stores"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" ng-class="{active : (CurrentTab =='Setting') }">
                    <div class="col-md-12" ng-if="(CurrentTab =='Setting')">
                        <div class="margin-top-10 table-responsive">
                            <table grid-data="Setting"
                                   grid-data-type="table" @*table/storedprocedure*@
                                   grid-data-action="getall" @*get/getall*@
                                   grid-data-object="T_System_Rule" @*table name or stored procedure name*@
                                   grid-filter-condition="[IsDisplay] = 1 and [StoreId] = {{CurrentStore}}" @*must have [fieldname] for each colum field*@
                                   grid-sort-condition="[OrderDisplay] ASC" @*must have [fieldname] for each colum field*@
                                   grid-sum-collection="" @*must have [fieldname] for each colum field*@
                                   class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th style="width:60%" grid-defined-colum="Description"><span>Mô tả</span></th>
                                        <th grid-defined-colum="Value"><span>Giá trị</span></th>
                                        <th></th>
                                        <th grid-defined-colum="RuleId" class="none-display"></th>
                                        <th grid-defined-colum="DataType" class="none-display"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @*Dataset must have grid id*@
                                    <tr ng-repeat="item in DataSet.Setting.Data">
                                        <td>
                                            <span class="bold" ng-bind="item.Description"> </span>
                                        </td>
                                        <td>
                                            <span ng-if="item.DataType != 'bool'">
                                                <span ng-bind="item.Value" ng-if="!item.IsEditing"></span>
                                                <input class="form-control" ng-model="item.Value" ng-if="item.IsEditing"
                                                       check-empty="" check-empty-message="Vui lòng nhập giá trị."
                                                       check-length="100" check-length-message="Chiều dài tối ta là {0}."
                                                       check-under="check-rule{{item.RuleId}}" />
                                            </span>

                                            <span ng-if="item.DataType == 'bool'">
                                                <input id="rdYes{{item.RuleId}}" type="radio" ng-model="item.Value" value="1" ng-disabled="!item.IsEditing" />
                                                <label class="font-weigth-normal" for="rdYes{{item.RuleId}}">Có</label>
                                                &nbsp;&nbsp;
                                                <input id="rdNo{{item.RuleId}}" type="radio" ng-model="item.Value" value="0" ng-disabled="!item.IsEditing" />
                                                <label class="font-weigth-normal" for="rdNo{{item.RuleId}}">Không</label>
                                            </span>
                                        </td>
                                        <td>
                                            <a ng-if="!item.IsEditing && item._CanUpdate" class="blue margin-left-10"
                                               title="Chỉnh sửa" ng-click="item.IsEditing = true;">
                                                <i class="fa-edit fa"></i>
                                            </a>
                                            <a ng-if="item.IsEditing && item._CanUpdate" class="blue margin-left-10"
                                               title="Lưu" ng-click="SaveRule(item);">
                                                <i class="fa-save fa"></i>
                                            </a>
                                            <a ng-if="item.IsEditing" class="blue margin-left-10"
                                               title="Hủy" ng-click="item.IsEditing = false; ReloadGrid('Setting')">
                                                <i class="fa-undo fa"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    <tr ng-if="!DataSet.Setting.HasRecord()">
                                        @*Edit colspan*@
                                        <td colspan="3" align="center"> Không có dữ liệu! </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" ng-class="{active : (CurrentTab =='Prints') }">
                    <div class="col-md-12" ng-if="(CurrentTab =='Prints')">
                        <div class="col-md-7 margin-top-10">
                            <div class="widget-box" ng-init="InitEditor()">
                                <div class="widget-header gray">
                                    <a href="#"> Chọn mẫu in </a>
                                    <div class="width-45">
                                        <select class="form-control" ng-model="TemplateForm.TemplateId"
                                                ng-change="GetTemplate()"
                                                dropdown-master-table="T_Master_PrintTemplates"
                                                dropdown-value-field="TemplateId" dropdown-name-field="TemplateName"
                                                dropdown-condition="[StoreId] = {{CurrentStore}}"
                                                dropdown-empty-value="0"
                                                dropdown-empty-text="Chọn mẫu in"
                                                ></select>
                                    </div>
                                    <button title="Tải về" class="btn btn-primary btn-sm" ng-click="GetDefaultTemplate()">
                                        <i class="fa-refresh fa"></i>
                                    </button>
                                    <button title="Lưu" class="btn btn-primary btn-sm" ng-click="SaveTemplate()">
                                        <i class="fa-save fa"></i>
                                    </button>
                                    <button title="Thông tin" class="btn btn-success btn-sm" data-toggle="modal" data-target="#PrintTermModal">
                                        <i class="fa-info fa"></i>
                                    </button>
                                    <button title="In thử" class="btn btn-primary btn-sm" ng-click="TestPrint()">
                                        <i class="fa-print fa"></i>
                                    </button>
                                </div>

                                <div class="widget-body">
                                    <div class="widget-main">
                                        <textarea id="editor" class="form-control"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-5 margin-top-10">
                            <div class="widget-box">
                                <div class="widget-header gray">
                                    <a href="#"> Xem trước mẫu in:</a>
                                    <span style="color: rgb(85, 85, 85)" ng-bind="TemplateForm.TemplateName"></span>
                                </div>
                                <div class="widget-body">
                                    <div class="widget-main" id="divPrintPreview" style="overflow-x: scroll">
                                        <span bind-html-compile="TemplateForm.HtmlBody">
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" ng-class="{active : (CurrentTab =='Promotion') }">
                    <div class="col-md-12" ng-if="(CurrentTab =='Promotion')">
                        <div class="row col-md-12 margin-top-10">
                            <span class="bold">Ghi chú:</span> Nếu tại một thời điểm có nhiều chương trình khuyến mãi được thỏa mãn, hệ thống chỉ áp dụng một chương trình có độ ưu tiên cao hơn.
                        </div>
                        <div class="row">
                            <div class="col-md-12 margin-top-10">
                                <div class="table-responsive">
                                    <table grid-data="Promotion"
                                           grid-data-type="table" @*table/storedprocedure*@
                                           grid-data-action="getall" @*get/getall*@
                                           grid-data-object="T_Master_Promotion" @*table name or stored procedure name*@
                                           grid-filter-condition="[StoreId] = {{CurrentStore}}" @*must have [fieldname] for each colum field*@
                                           grid-sort-condition="[OrderApply] DESC" @*must have [fieldname] for each colum field*@
                                           grid-sum-collection="" @*must have [fieldname] for each colum field*@
                                           class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th grid-defined-colum="PromoteCode"><span>Mã</span></th>
                                                <th grid-defined-colum="PromoteName"><span>Tên chương trình</span></th>
                                                <th grid-defined-colum="OrderApply"><span>Thứ tự áp dụng</span></th>
                                                <th grid-defined-colum="Amount"><span>Lượng giảm</span></th>
                                                <th grid-defined-colum="IsPercent"><span>Đơn vị</span></th>
                                                <th grid-defined-colum="MaxAmount"><span>Giảm tối đa (VND)</span></th>
                                                <th grid-defined-colum="MinConditionAmount"><span>Điều kiện</span></th>
                                                <th grid-defined-colum="StartDate"><span>Ngày bắt đầu</span></th>
                                                <th grid-defined-colum="EndDate"><span>Ngày kết thúc</span></th>
                                                <th></th>
                                                <th grid-defined-colum="Id" class="none-display"></th>
                                                <th grid-defined-colum="Notes" class="none-display"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @*Dataset must have grid id*@
                                            <tr ng-repeat="item in DataSet.Promotion.Data">
                                                <td ng-bind="item.PromoteCode"></td>
                                                <td ng-bind="item.PromoteName"></td>
                                                <td>
                                                    <input class="form-control" ng-model="item.OrderApply" check-integer
                                                           check-empty="" check-empty-message="Vui lòng nhập thứ tự áp dụng."
                                                           check-under="check-promotion{{item.Id}}" />
                                                </td>
                                                <td>
                                                    <input class="form-control min-width-100" ng-model="item.Amount"
                                                           check-empty="" check-empty-message="Vui lòng nhập số tiền giảm."
                                                           check-range="0;100" check-range-message="Phần trăm giảm trong khoảng [0;100]." ng-show="item.IsPercent == 1"
                                                           check-under="check-promotion{{item.Id}}" />
                                                    <input class="form-control check-currency" ng-model="item.Amount"
                                                           check-empty="" check-empty-message="Vui lòng nhập số tiền giảm."
                                                           check-range="0;" check-range-message="Số tiền giảm không được âm." ng-show="item.IsPercent == 0"
                                                           check-under="check-promotion{{item.Id}}" />
                                                </td>
                                                <td>
                                                    <input id="rdUnitYes{{item.Id}}" type="radio" ng-model="item.IsPercent" value="1" />
                                                    <label class="font-weigth-normal" for="rdUnitYes{{item.Id}}">%</label>
                                                    &nbsp;&nbsp;
                                                    <input id="rdUnitNo{{item.Id}}" type="radio" ng-model="item.IsPercent" value="0" />
                                                    <label class="font-weigth-normal" for="rdUnitNo{{item.Id}}">VNĐ</label>
                                                </td>
                                                <td>
                                                    <input class="form-control check-currency min-width-100" ng-model="item.MaxAmount"
                                                           check-empty="" check-empty-message="Vui lòng nhập số tiền giảm tối đa."
                                                           check-range="0;" check-range-message="Số tiền không được âm."
                                                           check-under="check-promotion{{item.Id}}" />
                                                </td>
                                                <td>
                                                    <input class="form-control check-currency min-width-110" ng-model="item.MinConditionAmount"
                                                           check-empty="" check-empty-message="Vui lòng nhập điều kiện tối thiểu để áp dụng chương trình."
                                                           check-range="0;" check-range-message="Số tiền không được âm."
                                                           check-under="check-promotion{{item.Id}}" />
                                                    <span ng-if="item.Notes">
                                                        <span class="bold red"> * </span>
                                                        <span ng-bind="item.Notes"></span>
                                                    </span>
                                                </td>
                                                <td>
                                                    <input class="form-control date-picker min-width-100" ng-model="item.StartDate"
                                                           check-empty="" check-empty-message="Vui lòng nhập ngày bắt đầu chương trình."
                                                           check-under="check-promotion{{item.Id}}" />
                                                </td>
                                                <td>
                                                    <input class="form-control date-picker min-width-100" ng-model="item.EndDate"
                                                           check-empty="" check-empty-message="Vui lòng nhập kết thúc chương trình."
                                                           check-under="check-promotion{{item.Id}}" />
                                                </td>
                                                <td>
                                                    <a ng-if="item._CanUpdate" class="blue margin-left-10"
                                                       title="Lưu" ng-click="SavePromotion(item);">
                                                        <i class="fa-save fa"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr ng-if="!DataSet.Promotion.HasRecord()">
                                                @*Edit colspan*@
                                                <td colspan="10" align="center"> Không có dữ liệu! </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <span ng-init="InitDatePicker();InitFilterCurrency();"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div ng-include src="'@Url.Action("UserModal", "Admin")'">
    </div>
    <div ng-include src="'@Url.Action("RolesModal", "Admin")'">
    </div>
    <div ng-include src="'@Url.Action("ProductGroupModal", "Admin")'">
    </div>
    <div ng-include src="'@Url.Action("PrintTermModal", "Admin")'">
    </div>
    <div ng-include src="'@Url.Action("PromotionStore", "Admin")'">
    </div>
</div>